<html>
<head>
<title>Moving thing</title>
</head>
<body>
<canvas id="thingy" width=700 height=700>
<script>
window.addEventListener("keydown", doKeyDown, true);
var drawingThingy = document.getElementById("thingy");
var x = 100;
var y = 100;
var p;
var squareX = Math.random()*700;
var squareY = Math.random()*700;
drawingThingy = drawingThingy.getContext("2d");
var color = ["#0000FF", "#00ff00", "#ff0000", "#008000", "#800080"];
function startUp(){
drawingThingy.clearRect(0, 0, 700, 700);
drawingThingy.beginPath();
drawingThingy.ellipse(x, y, 70, 70, 0, 0, 2*Math.PI);
drawingThingy.stroke();
drawingThingy.closePath();
drawingThingy.beginPath();
drawingThingy.rect(squareX, squareY, 20, 20);
drawingThingy.stroke();
drawingThingy.closePath();
}
function squareMovement(){
setTimeout("squareMovement()");
startUp();
squareX = squareX+10;
drawingThingy.strokeStyle = color[Math.floor(Math.random()*5)];
if(squareX>10){
squareX == 0;
}
if(squareX<0){
squareX == 10;
}
}
function doKeyDown(e){
if(e.keyCode == 68){
rightMove();
}
if(e.keyCode == 65){
leftMove();
}
if(e.keyCode == 87){
upmove();
}
if(e.keyCode == 83){
downmove();
}
if(e.keyCode == 32){
squareMovement();
}
if(e.keyCode == 82){
squareMovement();
}
}
function rightMove(){
if(x > 700){
x = 0
}
else{
x = x+Math.random()*100;
}
clearTimeout(p);
}
function leftMove(){
p = setTimeout("leftMove()",1);
if(x < 0){
x = 700;
}
else{
x = x-Math.random()*100;
}
document.body.style.backgroundColor = color[Math.floor(Math.random()*5)];
}
function upmove(){
p = setTimeout("upmove()",1);
if(y < 0){
y = 700;
}
else{
y = x-Math.random()*100;
}
document.body.style.backgroundColor = color[Math.floor(Math.random()*5)];
}
function downmove(){
if(y > 700){
y = 0;
}
else{
y = y+Math.random()*100;
}
clearTimeout(p);
}
</script>
</canvas>
</canvas>
</body>
</html>